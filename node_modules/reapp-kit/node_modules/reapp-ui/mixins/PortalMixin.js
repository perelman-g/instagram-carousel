'use strict';

var React = require('react');
var Theme = require('../helpers/Theme');

module.exports = function (Portal) {
  return {
    componentDidMount: function componentDidMount() {
      this.node = document.createElement('div');
      document.body.appendChild(this.node);
      this._render(this.props, this.node);
    },

    componentWillReceiveProps: function componentWillReceiveProps(nextProps) {
      this._render(nextProps, this.node);
    },

    componentWillUnmount: function componentWillUnmount() {
      React.unmountComponentAtNode(this.node);
      document.body.removeChild(this.node);
    },

    _render: function _render(props, node) {
      React.render(React.createElement(
        Theme,
        this.context.theme,
        React.createElement(Portal, props)
      ), node);
    }
  };
};